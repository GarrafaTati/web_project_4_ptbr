(()=>{"use strict";var e={d:(t,o)=>{for(var n in o)e.o(o,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:o[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};e.d({},{QQ:()=>L,ud:()=>q,A8:()=>E});const t=document.querySelector(".places"),o=document.querySelector(".modal_type_img");function n(){o.classList.add("modal_state_opened"),document.addEventListener("keydown",i)}function r(){o.classList.remove("modal_state_opened")}function i(e){"Escape"===e.key&&(r(),document.removeEventListener("keydown",i))}t.querySelectorAll(".place__img").forEach((function(e){e.addEventListener("click",n)})),o.querySelector(".modal__close").addEventListener("click",r);const c=document.querySelector(".button_type_edit"),s=document.querySelector(".modal_type_edit"),a=s.querySelector(".modal__close");function l(e){"Escape"===e.key&&(d(),document.removeEventListener("keydown",l))}function d(){s.classList.remove("modal_state_opened"),E(q)}c.addEventListener("click",(function(){s.classList.add("modal_state_opened"),document.addEventListener("keydown",l)})),a.addEventListener("click",d);const _=document.querySelector(".button_type_add"),u=document.querySelector(".modal_type_add"),m=u.querySelector(".modal__close");function p(e){"Escape"===e.key&&(y(),document.removeEventListener("keydown",p))}function y(){u.classList.remove("modal_state_opened"),E(L)}_.addEventListener("click",(function(){u.classList.add("modal_state_opened"),document.addEventListener("keydown",p)})),m.addEventListener("click",y),document.querySelectorAll(".modal").forEach((function(e){window.addEventListener("click",(e=>{e.target===s?d():e.target===u?y():e.target===o&&r()}))})),document.querySelector(".form__form_action_create").addEventListener("submit",(function(e){e.preventDefault();const o=document.querySelector(".form__input_type_title"),n=document.querySelector(".form__input_type_link"),r={name:o.value,link:n.value},i=new h(r,"#place");t.prepend(i.createCard()),o.value="",n.value="",y(),E(L)}));class h{constructor(e,t){this._name=e.name,this._link=e.link,this._cardSelector=t}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".place").cloneNode(!0)}createCard(){return this._element=this._getTemplate(),this._setEventListeners(),this._element.querySelector(".title").textContent=this._name,this._element.querySelector(".place__img").src=this._link,this._element.querySelector(".place__img").alt=this._name,this._element}_setEventListeners(){this._element.querySelector(".place__likeicon").addEventListener("click",(()=>this._likeButton())),this._element.querySelector(".place__delete").addEventListener("click",(()=>this._deleteCard())),this._element.querySelector(".place__image").addEventListener("click",(()=>this._popUpImgEl()))}_likeButton(){this._element.querySelector(".place__likeicon").classList.toggle("place__likeicon_state_active")}_deleteCard(){this._element.remove()}_popUpImgEl(){const e=document.querySelector(".modal__wrapper_type_img").querySelector(".modal__modal_type_img"),t=this._element.querySelector(".place__img").src;e.querySelector(".modal__img").src=t;const o=this._element.querySelector(".title").textContent;e.querySelector(".modal__title").textContent=o,e.querySelector(".modal__img").alt=o,n()}}class f{constructor(e,t){this._form=t,this._config=e}_toggleButtonState(e,t){this._hasInvalidInput(e)?(t.classList.add(this._config.inactiveButtonClass),t.setAttribute("disabled",!0)):(t.classList.remove(this._config.inactiveButtonClass),t.removeAttribute("disabled"))}_hasInvalidInput(e){return e.some((e=>!e.validity.valid))}_checkInputValidity(e){e.validity.valid?this._hideError(e):this._showError(e,e.validationMessage)}_showError(e,t){const o=this._form.querySelector(`.${e.id}-error`);e.classList.add(this._config.inputErrorClass),o.textContent=t,o.classList.add(this._config.errorClass)}_hideError(e){const t=this._form.querySelector(`.${e.id}-error`);e.classList.remove(this._config.inputErrorClass),t.classList.remove(this._config.errorClass),t.textContent=""}enableValidation(){const e=Array.from(this._form.querySelectorAll(this._config.inputSelector)),t=this._form.querySelector(this._config.submitButtonSelector);this._toggleButtonState(e,t),e.forEach((o=>{o.addEventListener("input",(()=>{this._checkInputValidity(o),this._toggleButtonState(e,t)}))}))}}const v=document.querySelector(".places");[{name:"Vale de Yosemite",link:"https://code.s3.yandex.net/web-code/yosemite.jpg"},{name:"Lago Louise",link:"https://code.s3.yandex.net/web-code/lake-louise.jpg"},{name:"Montanhas Carecas",link:"https://code.s3.yandex.net/web-code/bald-mountains.jpg"},{name:"Latemar",link:"https://code.s3.yandex.net/web-code/latemar.jpg"},{name:"Parque Nacional da Vanoise ",link:"https://code.s3.yandex.net/web-code/vanoise.jpg"},{name:"Lago di Braies",link:"https://code.s3.yandex.net/web-code/lago.jpg"}].forEach((e=>{const t=new h(e,"#place").createCard();v.append(t)}));const S=document.querySelector(".form__form");S.addEventListener("submit",(function(e){e.preventDefault();const t=S.querySelector(".form__input_type_name"),o=S.querySelector(".form__input_type_about"),n=t.value,r=o.value,i=document.querySelector(".profile__name"),c=document.querySelector(".profile__aboutme");i.textContent=n,c.textContent=r,d(),E(q)}));const g={inputSelector:".form__input",submitButtonSelector:".form__button",inactiveButtonClass:"form__button_mode_disabled",inputErrorClass:"form__input_mode_error",errorClass:"form__error_state_active"},q=document.forms.edit,L=document.forms.add;function E(e){const t=document.querySelectorAll(".form__error"),o=document.querySelectorAll(".form__button");t.forEach((e=>{e.classList.remove("form__error_state_active")})),o.forEach((e=>{e.setAttribute("disabled",!0),e.classList.add("form__button_mode_disabled")})),e.reset()}new f(g,q).enableValidation(),new f(g,L).enableValidation()})();